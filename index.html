<!DOCTYPE html>
<html>
  <head>
    <title>60% keyboard</title>

    <meta charset="UTF-8">
    <meta name="description" content="Overview of mechanical keyboard">
    <meta name="keywords" content="Arduino,C++,Keyboard,Mechanical Keyboard">
    <meta name="author" content="Dawid Kurek (dawikur@gmail.com)">

    <link rel="stylesheet" href="css/crow.css"/>
    <link rel="stylesheet" href="css/fonts.css"/>
    <link rel="stylesheet" href="css/gruvbox.css"/>

    <link rel="stylesheet" href="css/highlight.min.css">
  </head>
  <body>

    <textarea id="source">

name: title
layout: true
class: middle, center, inverse

---

# 60% black mechanical keyboard

## crow

???

[time] 17 ; 47

---

layout: false

.left-column[
  ## .active[agenda]
]

--

- ### 60%

--

- ### black

--

- ### mechanical

--

- ### keyboard

--

- ### crow

--

.footnote[
  .right[.red[*] This is what this presentation is all about, right?]
]

.ribbon[?]

---

template: title

# 60%

???

[time] 0 ; 3

---

.left-column[
  ### .active[60%]
  - .active[size]
  - standard
  - key
]
.right-column[.center.middle[
![ANSI 100%](res/iso/100.svg)

## .fg00[100% - 105 keys]

## .bg04[80% -  88 keys]

## .bg01[60% -  62 keys]
]
.footnote[.right[.red[*] ISO]]
]

???

* big enter
* short left shift with key between it and 'z'
* 50% - 48 keys

---

.left-column[
  ### .active[60%]
  - .active[size]
  - standard
  - key
]
.right-column[.center.middle[
![ANSI 100%](res/ansi/100.svg)

## .fg00[100% - 104 keys]

## .bg04[80% -  87 keys]

## .bg01[60% -  61 keys]
]
.footnote[.right[.red[*] ANSI]]
]

???

* one key less than ISO
* smaller enter
* longer left shift
* 50% - 47 keys

---

.left-column[
  ### .active[60%]
  - size
  - .active[standard]
  - key
]
.right-column[.center.middle[
## ISO
![ISO 60%](res/iso/60.svg)
## ANSI
![ANSI 60%](res/ansi/60.svg)
]]

???

what are the differences?

---

.left-column[
  ### .active[60%]
  - size
  - .active[standard]
  - key
]
.right-column[.center.middle[
## ISO
![ISO 60%](res/iso/60_R.svg)
## ANSI
![ANSI 60%](res/ansi/60_R.svg)
]]

???

enter island

---

.left-column[
  ### .active[60%]
  - size
  - .active[standard]
  - key
]
.right-column[.center.middle[
## ISO
![ISO 60%](res/iso/60_L.svg)
## ANSI
![ANSI 60%](res/ansi/60_L.svg)
]]

???

* left shift island
* one additional key in ANSI

---

.left-column[
  ### .active[60%]
  - size
  - standard
  - .active[key]
]
.right-column[.center[

![Keys Sizes](res/KeysSizes.svg)

]]

.ribbon[?]

???

differet key sizes, arbitrary unit

* all letters are box 1x1
* progression is with 0.25
* longest is spacebar (shortest I have seen was 3!), for me minimum 5

---

template: title

# Black

???

[time] 8 ; 11

---

.left-column[
  ### 60%
  ### .active[black]
  - .active[keycaps]
  - profiles
]
.right-column[
  .fill[![KeyCaps](res/keycaps/0.png)]
]

???

plastic, thing that is actually touched

---

.left-column[
  ### 60%
  ### .active[black]
  - .active[keycaps]
  - profiles
]
.right-column[
  .fill[![1](res/keycaps/1.png)]
]

???

different colors

---

.left-column[
  ### 60%
  ### .active[black]
  - .active[keycaps]
  - profiles
]
.right-column[
  .fill[![2](res/keycaps/2.png)]
]

???

semitranspared

---

.left-column[
  ### 60%
  ### .active[black]
  - .active[keycaps]
  - profiles
]
.right-column[
  .fill[![3](res/keycaps/3.png)]
]

???

(very) nonstandard labeling

---

.left-column[
  ### 60%
  ### .active[black]
  - .active[keycaps]
  - profiles
]
.right-column[
  .fill[![4](res/keycaps/4.png)]
]

???

printed on the side (my favorite!)

---

.left-column[
  ### 60%
  ### .active[black]
  - .active[keycaps]
  - profiles
]
.right-column[
  .fill[![5](res/keycaps/5.png)]
]

???

different shapes, now with 3d-printing gets very popular

---

.left-column[
  ### 60%
  ### .active[black]
  - keycaps
  - .active[profiles]
]
.right-column[
  ![KyesProfiles](res/profiles.png)
]

.ribbon[?]

???

* rows are marked, from bottom (spacebar row)
* makes it more 'ergonomic'
* taken from cherry mx documentation


---

template: title

# Mechanical

???

[time] 6 ; 17

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - .active[switches]
  - wiring
]
.right-column[
  ![Switch](res/switch/parts.jpg)
]

???

switch is not very complicated:
* plastic frame
* spring
* cross, plastic pin which is moving
* often the middle pin is oiled

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - .active[switches]
  - wiring
]
.right-column[
  ![Switches](res/switch/table.png)
]

???

those are for cherry, but it is quite a standard thing
* colors normally means sound level and 'feel'
* red is soft but does not provide 'feeled' click on activation
* blue is soft as red, but does have 'click' on 'activation' (both feel and sound)
* brown has only 'feel'
* green is 'hardest' to press
* there is also a difference in force neede to press

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - .active[switches]
  - wiring
]
.right-column[
  ![Red](res/switch/red.gif) ![Brown](res/switch/brown.gif) ![Black](res/switch/black.gif) ![Blue](res/switch/blue.gif)
]

???

section
* the main (only?) difference is the pin shape

work
* depending on the little hook the feel and sound is different

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - .active[switches]
  - wiring
]
.right-column[
  ![o'rings](res/switch/orings.jpg)
]

???

rubbers on keycaps

noise reduse

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
]

???

let us create some setup

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/0.svg" />
]

???

microcontoller

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/1.svg" />
]

???

switch

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/2.svg" />
]

???

power and ground

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/3.svg" />
]

???

wiring up with "pull-up" resistor

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/4.svg" />
]

???

all done

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/5.svg" />
]

???

inactive state: currency goes from VCC to GND

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/6.svg" />
]

???

active state: currency goes from PIN to GND

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/4.svg" />
]

???

so, now...

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/7.svg" />
]

???

... lets add more switches

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/8.svg" />
]

???

one more

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/9.svg" />
]

???

all of them

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/10.svg" />
]

???

all ...

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/11.svg" />
]

???

... works ...

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/12.svg" />
]

???

... good

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/13.svg" />
]

???

a lot of switches and pins

number of switches cannot be reduced:
* it is physical limitation, to have 62 keys we need 62 switches

number of pins can:
* we can use matrix to reduce number of pins
* control both ends of wire

ISO

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/14.svg" />
]

???

step first:
* control both sides of currency

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/15.svg" />
]

???

does it still work?

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/16.svg" />
]

???

we assume pull-up resistor to be in microcontoller

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/17.svg" />
]

???

matrix

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/18.svg" />
]

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  ### N rows
  ### M columns
  ### N * M keys
  ### N + M pins
  ### #pins = 2 * log(#keys)
]

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/19.svg" />
]

???

one key - OK

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/20.svg" />
]

???

more - OK

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/21.svg" />
]

???

until...

shadowing

---

.left-column[
  ### 60%
  ### black
  ### .active[mechanical]
  - switches
  - .active[wiring]
]
.right-column[
  <object type="image/svg+xml" data="res/wiring/17.svg" />
]

.ribbon[?]

???

questions
(why ribbon is not visible?)

---

template: title

# Keyboard

???

[time] 13 ; 30

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ### arduino micro - USB support
  ### C++11
]

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Flow](res/keyboard/activity.png)
]

???

general flow

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/loop.png)
]

???

flow in c++

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/loop_a.png)
]

???

for each row: get current and previous state

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/getrow.png)
]

???

get row

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/getrow_a.png)
]

???

Rows and Cols are just arrays

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/getrow_b.png)
]

???

set row 'active'

wait some time to stabilize

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/getrow_c.png)
]

???

for each pin in row: read pin state and store it

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/getrow_d.png)
]

???

disable row

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/getrow_e.png)
]

???

return

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/loop_a.png)
]

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/loop_b.png)
]

???

for each column: get current and previous bit state

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/loop_c.png)
]

???

if state changed: execute update

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/executor.png)
]

???

user row and col to index array

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/l1.png)
]

???

just a big array of function pointers

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/defines.png)
]

???

user stateless lambda as a function

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/executor.png)
]

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/loop_c.png)
]

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/loop_d.png)
]

???

store new row value

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/loop_e.png)
]

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/executor.png)
]

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/keyboard.png)
]

???

hid description, standard one (8 bytes) to work under bios

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/keyboard_a.png)
]

???

header

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/keyboard_b.png)
]

???

first byte - modifiers
* ctrl
* alt
* shift
* 'GUI' (a.ka. Windows key)
* times 2: left and right

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/keyboard_c.png)
]

???

reserved

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/keyboard_d.png)
]

???

6 bytes for keys

not ASCII

limits max keys number

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/keyboardraw.png)
]

???

in c++


---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/keyboardset.png)
]

???

updating state

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/keyboardset_a.png)
]

???

check all 6 keys slots

if pressed - return

look for first empty slot

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/keyboardset_b.png)
]

???

remove from keys if pressed

don't need to colapse empty in the middle

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/keyboardset_c.png)
]

???

modifiers are just bit mask - set or unset

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Loop](res/keyboard/send.png)
]

???

send report (with arduinos HID class)

it is just a raw data

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### .active[keyboard]
]
.right-column[
  ![Flow](res/keyboard/activity.png)
]

.ribbon[?]

---

template: title

# Crow

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### keyboard
  ### .active[crow]
]
.right-column[
  ![Crow 0](res/crow/0.png)
  ![Crow 1](res/crow/1.png)
  ![Crow 2](res/crow/2.png)
]

???

layers - like function keys

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### keyboard
  ### .active[crow]
]
.right-column[
  ![Crow 0](res/crow/0_a.png)
  ![Crow 1](res/crow/1.png)
  ![Crow 2](res/crow/2.png)
]

???

layers keys instead of ctrls

ctrl instead of capslock

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### keyboard
  ### .active[crow]
]
.right-column[
  ![Crow 0](res/crow/0.png)
  ![Crow 1](res/crow/1_a.png)
  ![Crow 2](res/crow/2.png)
]

???

vim hjkl

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### keyboard
  ### .active[crow]
]
.right-column[
  ![Crow 0](res/crow/0.png)
  ![Crow 1](res/crow/1_b.png)
  ![Crow 2](res/crow/2.png)
]

???

* End - A
* Del - x
* Insert - R

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### keyboard
  ### .active[crow]
]
.right-column[
  ![Crow 0](res/crow/0.png)
  ![Crow 1](res/crow/1.png)
  ![Crow 2](res/crow/2_a.png)
]

???

mouse

---

.left-column[
  ### 60%
  ### black
  ### mechanical
  ### keyboard
  ### .active[crow]
]
.right-column[
  ![Crow 0](res/crow/0.png)
  ![Crow 1](res/crow/1.png)
  ![Crow 2](res/crow/2_b.png)
]

???

customer report (media)

---

class: middle, center, title

# questions?

.ribbon[?]

---

template: title

# Thanks

---

class: title

## colors: [gruvbox](http://github.com/morhetz/gruvbox)
## layouts: [keyboards layout editor](http://www.keyboard-layout-editor.com) (+[vim](http://www.vim.org), +[inkscape](https://inkscape.org))
## images: [falbatech](http://falbatech.pl) and [internet](http://google.com)

    </textarea>

    <script type="text/javascript" src="js/remark.min.js" ></script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
  </body>
</html>
